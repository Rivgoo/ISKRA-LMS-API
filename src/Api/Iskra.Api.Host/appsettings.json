{
  "DataProtection": {
    "CertificatePath": "YourCertificate.pfx",
    "CertificatePassword": "YourSuperSecretPassword"
  },
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File", "Serilog.Sinks.Async" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Information",
        "Microsoft.Hosting.Lifetime": "Information",
        "System": "Warning",
        "Microsoft.AspNetCore.Authentication": "Information"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "theme": "Serilog.Sinks.SystemConsole.Themes.AnsiConsoleTheme::Code, Serilog.Sinks.Console",
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {SourceContext}: {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "Async",
        "Args": {
          "configure": [
            {
              "Name": "File",
              "Args": {
                "path": "logs/iskra-.log",
                "rollingInterval": "Day",
                "retainedFileCountLimit": 30,
                "fileSizeLimitBytes": 52428800,
                "rollOnFileSizeLimit": true,
                "buffered": true,
                "flushToDiskInterval": "00:00:05",
                "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] [{SourceContext}] {Message:lj}{NewLine}{Exception}"
              }
            }
          ]
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
  },
  "Security": {
    "HostFiltering": {
      "AllowedHosts": "*",
      "AllowEmptyHosts": false,
      "IncludeFailureMessage": false
    },
    "Cors": {
      "DefaultPolicyName": "AllowLocalhost",
      "Policies": [
        {
          "Name": "AllowLocalhost",
          "Origins": [ "https://localhost:5275" ],
          "Methods": [ "GET", "POST", "PUT", "DELETE" ],
          "Headers": [ "*" ],
          "AllowCredentials": true
        },
        {
          "Name": "PublicApi",
          "Origins": [ "*" ],
          "Methods": [ "GET" ],
          "Headers": [ "*" ]
        }
      ]
    },
    "RateLimiting": {
      "Enabled": true,
      "RejectionStatusCode": 429,
      "Global": {
        "PermitLimit": 600,
        "WindowSeconds": 60,
        "QueueLimit": 10
      },
      "Policies": [
        {
          "Name": "AuthPolicy",
          "PermitLimit": 5,
          "WindowSeconds": 60,
          "QueueLimit": 0
        },
        {
          "Name": "ApiStrict",
          "PermitLimit": 120,
          "WindowSeconds": 60,
          "QueueLimit": 5
        }
      ]
    },
    "Headers": {
      "XContentTypeOptions": "nosniff",
      "ContentSecurityPolicy": "default-src 'none'; script-src 'none'; frame-ancestors 'none';"
    },
    "Sanitization": {
      "Enabled": true,
      "ExcludedProperties": [
        "Password",
        "OldPassword",
        "NewPassword"
      ]
    }
  },
  "SystemModules": [
    "Iskra.Modules.Validation",
    "Iskra.Modules.Iam"
  ],
  "PluginSettings": {
    "EnableCleaner": true,
    "EnabledModules": [
      "Iskra.Modules.Develop.Swagger",
      "Iskra.Modules.MariaDb",
      "Iskra.Modules.Users",
      "Iskra.Modules.Auth",
      "Iskra.Modules.Auth.Password"
    ]
  },
  "Iskra.Modules.MariaDb": {
    "ConnectionStrings": {
      "DefaultConnection": "Server=localhost;Database=iskra_lms;User=root;Password=root;"
    },
    "DatabaseSettings": {
      "AutoMigrate": true
    }
  },
  "Iskra.Modules.Users": {
    "Registration": {
      "AllowPasswordlessRegistration": false
    }
  },
  "Iskra.Modules.Validation": {
    "UserValidation": {
      "MinFirstNameLength": 2,
      "MaxFirstNameLength": 80,
      "MinLastNameLength": 2,
      "MaxLastNameLength": 80,
      "MinMiddleNameLength": 0,
      "MaxMiddleNameLength": 80
    },
    "PasswordValidation": {
      "MinLength": 8,
      "MaxLength": 50,
      "RequireDigit": true,
      "RequireLowercase": true,
      "RequireUppercase": true,
      "RequireNonAlphanumeric": false,
      "CustomRegexPattern": null
    },
    "EmailValidation": {
      "MaxEmailLength": 100,
      "RegexPattern": "^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$",
      "AllowedDomains": []
    }
  },
  "Iskra.Modules.Auth": {
    "Security": {
      "RequireEmailConfirmation": false
    },
    "SessionCleanup": {
      "Enabled": true,
      "RunIntervalHours": 24,
      "RetentionDays": 180
    },
    "Jwt": {
      "Secret": "PLEASE_CHANGE_THIS_TO_A_VERY_LONG_RANDOM_STRING_AT_LEAST_32_CHARS",
      "Issuer": "Iskra.Api",
      "Audience": "Iskra.Client",
      "AccessTokenExpirationMinutes": 15,
      "RefreshTokenExpirationDays": 1
    },
    "Cookies": {
      "AccessTokenName": "iskra_access",
      "RefreshTokenName": "iskra_refresh",
      "SameSite": "Strict",
      "HttpOnly": true,
      "Secure": true,
      "UsePersistentCookies": true
    }
  }
}
